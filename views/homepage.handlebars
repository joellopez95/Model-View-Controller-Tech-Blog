<!-- views/home.handlebars -->

<div class="container mt-5">
  {{#if user}}
    <!-- If user logged in, display welcome message, links to dashboard, and logout -->
    <div class="mb-4">
      <h1 class="display-4">Welcome, {{user.username}}!</h1>
      <p class="lead">Explore and share your thoughts about tech on our CMS-style blog.</p>
      <p>
        <a class="btn btn-primary btn-lg" href="/dashboard" role="button">Go to Dashboard</a>
        <a class="btn btn-danger btn-lg" href="/logout" role="button">Logout</a>
      </p>
    </div>
{{#if logged_in}}
  <a href="/create-post">Create a New Post</a>
{{/if}}

{{#each posts}}
  <div class="post">
    <h2>{{title}}</h2>
    <p>{{content}}</p>
    <p class="post-meta">Created by {{user.username}} on {{formatDate createdAt}}</p>
  </div>
{{/each}}

  {{else}}
    <!-- If the user is not logged in, provide information about the blog and links to sign up or log in -->
    <div class="mb-4">
      <h1 class="display-4">Welcome to the Tech Blog!</h1>
      <p class="lead">
        This is a CMS-style blog where you can publish articles, blog posts, and share your thoughts and opinions about tech.
        <a href="/login">Log in</a> to get started!
      </p>
    </div>
  {{/if}}

  {{#if posts.length}}
    <!-- If there are blog posts, display recent posts -->
    <h2 class="mt-4">Recent Blog Posts:</h2>
    {{#each posts}}
      <div class="card mb-4">
        <div class="card-body">
          <h3 class="card-title">{{title}}</h3>
          <p class="card-text">{{content}}</p>
          <p class="card-text">
            <small class="text-muted">Created by {{User.username}} on {{formatDate createdAt}}</small>
          </p>
          <a href="/post/{{id}}" class="btn btn-primary">Read More</a>
        </div>
      </div>
    {{/each}}
  {{else}}
    <!-- If there are no blog posts, encourage the user to create one -->
    <p>No blog posts available. Start creating your own! <a href="/dashboard/create" class="btn btn-success">Create a new post</a></p>
  {{/if}}
</div>
