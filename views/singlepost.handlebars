<!-- views/singlepost.handlebars -->

{{#if post}}
<!-- Displays single post -->
  <div class="post">
    <h2 class="post-title">{{post.title}}</h2>
    <p>{{post.content}}</p>
    <p class="post-meta">Created by {{post.User.username}} on {{formatDate post.createdAt}}</p>
<!-- display comments-->
    <h3>Comments:</h3>
    {{#if comments.length}}
      {{#each comments}}
        {{> comment}}
      {{/each}}
    {{else}}
      <p>No comments yet. Be the first to comment!</p>
    {{/if}}
<!-- allow users to add comments if logged in-->
    {{#if user}}
      <h3>Add a Comment:</h3>
      <form action="/comment/{{post.id}}" method="POST">
        <div class="form-group">
          <label for="comment">Comment:</label>
          <textarea id="comment" name="comment" rows="4" required></textarea>
        </div>
        <div class="form-group">
          <button type="submit" class="btn">Submit Comment</button>
        </div>
      </form>
 <!-- Prompt users to log in if they want to leave a comment -->
    {{else}}
      <p>You need to be logged in to leave a comment. <a href="/login">Login</a></p>
    {{/if}}
  </div>
{{else}}
  <p>Post not found.</p>
{{/if}}
